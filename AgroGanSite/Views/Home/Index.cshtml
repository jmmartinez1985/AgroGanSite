@{
    ViewBag.Title = "Home Page";
}
<script src="@Url.Content("~/Scripts/jquery-1.7.1.js")"></script>
<script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-carousel.js")"></script>
<script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-alert.js")"></script>
<script src="@Url.Content("~/Scripts/Bootstrap/bootstrap-collapse.js")"></script>
<link href="@Url.Content("~/Content/bootstrap-helper.css")" rel="stylesheet" />

<link href="@Url.Content("~/Content/jpages/jPages.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/jpages/animate.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jpage/jPages.min.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/Unify/jquery.bxslider.css")" rel="stylesheet" />
<link href="@Url.Content("~/Content/Unify/flexslider.css")" rel="stylesheet" />

<script src="@Url.Content("~/Scripts/CustomScript/jquery.bxslider.js")"></script>
<script src="@Url.Content("~/Scripts/CustomScript/app.js")"></script>


<style>
    .DisplayNew {
        display: block !important;
    }

    .NoDisplayNew {
        display: none !important;
    }
</style>


<div class="breadcrumbs margin-bottom-20" style="background-color:#3498db">
    <div class="container">
        <div class="row-fluid">
            <h3 style=" color:white" class="color-blue pull-left">Servicios y productos de alta y excelente calidad es nuestro inventario.</h3>
        
        </div>
        <!--/container-->
    </div>
</div>
<div class="container">
    <section class="content-wrapper">

        @if (!Request.IsAuthenticated)
        {
            @*
            <div class="alert alert-warning fade in">
                <button aria-hidden="true" data-dismiss="alert" class="close" type="button">×</button>
                <h2 style="font-style:italic; font-family:Century">Sin productores no hay comida...</h2>
            </div>*@
          
              
            
            
            <div class="row-fluid">

                <div class="span8">
                    <section id="carousel">


                        <div class="bs-docs-example">
                            <div id="myCarousel" class="carousel slide">
                            </div>
                        </div>

                    </section>

                </div>

                <div class="span4">
                    <div id="ContentDiv" style="text-align: justify">
                        <h3>Empresa</h3>
                        <p><a href="empresa.php">Abonos Superior</a> es una empresa dedicada a la producci&oacute;n y comercializaci&oacute;n de <a href="categorias.php?fam=protectores-cultivos&amp;cat=agroquimicos">agroqu&iacute;micos</a>, <a href="categorias.php?fam=protectores-cultivos&amp;cat=fertilizantes">fertilizantes</a>, <a href="carpi.php">equipos de aspersi&oacute;n</a> y <a href="semillas.php">semillas</a>. </p>
                        <p>Abonos Superior posee gran tradici&oacute;n en el mercado nacional e internacional, concentr&aacute;ndose en la b&uacute;squeda de soluciones integrales para resolver problemas de los productores en los mercados que atiende. </p>
                        <p>Abonos Superior est&aacute;comprometida con el manejo adecuado de sus aspectos ambientales sellando este compromiso mediante la obtenci&oacute;n del <a href="compromiso-ambiental.php">certificado ISO 14001-2004</a>. </p>
                    </div>
                </div>
            </div>  
                
        
            <!-- Boletin del Agro -->
            <div class="headline">
                <h3>Boletin del Agro</h3>
            </div>
            <div class="row-fluid margin-bottom-40 boletinagro">
            </div>
            <!--/row-->
            <!-- //End Recent Works -->
                
        
        
            <div class="row-fluid">
                <div class="span4">
                    <div class="headline">
                        <h3>Nuestra Oferta</h3>
                    </div>
                    <p><strong>Vivamus imperdiet condimentum diam, eget placerat felis consectetur id.</strong> Donec eget orci metus, vivamus imperdiet condimentum.</p>
                    <ul class="unstyled">
                        <li><i class="icon-ok color-green"></i>Donec id elit non mi porta gravida</li>
                        <li><i class="icon-ok color-green"></i>Responsive Bootstrap Template</li>
                        <li><i class="icon-ok color-green"></i>Corporate and Creative</li>
                        <li><i class="icon-ok color-green"></i>Responsive Bootstrap Template</li>
                        <li><i class="icon-ok color-green"></i>Corporate and Creative</li>
                    </ul>
                    <br>
                </div>
                <div class="span4">
                    <div class="headline">
                        <h3>Nuestro Éxito</h3>
                    </div>
                    <p>
                        <img class="pull-left lft-img-margin img-width-200" src="~/FilesUploaded/2.jpg" alt="" />
                        Vivamus cond imentum diam, eget placerat felis consectetur id. Donec eget orci metus, Vivamus imperdiet condimentum diam, eget placerat felis consectetur id. Donec eget orci metus, ac adipiscing  ante ac interdum ullamcorper. Donec eget orci metus, ac adipiscing nunc. Pellentesque fermentum, ante ac interdum. <a class="read-more" href="#">Read more..</a>
                    </p>
                </div>

                <div class="span4">
                    <!-- Photo Stream -->
                    <div class="margin-bottom-30">
                        <div class="headline">
                            <h3>Últimos Productos</h3>
                        </div>
                        <ul class="unstyled blog-ads last-product">
                        </ul>
                    </div>
                </div>
            </div>
        
            <div class="row-fluid">
                <div class="headline">
                    <h3>Proveedores</h3>
                </div>
                <div class="span12">
                    @Html.Partial("SponsorView")
                </div>
            </div> 
        }
        else
        {
                    

            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span4">

                        <div class="sidebar-nav">
                            @*<a data-toggle="collapse" class="nav-header" href="#dashboard-menu"><i class="icon-legal"></i>Dashboard</a>*@
                            <div class="headline">
                                <h3>Dashboard</h3>
                            </div>
                            <ul class="nav nav-list collapse in" id="dashboard-menu">
                                <li><a href="@Url.Action("Index", "Home")">Home</a></li>
                                @if (Request.IsAuthenticated && Roles.IsUserInRole("Admin"))
                                {
                                    <li><a href="@Url.Action("Index", "Product")">Productos</a></li>
                                    <li><a href="@Url.Action("Index", "PrincipalInfo")">Pagina Inicial</a></li>
                                    <li><a href="@Url.Action("Index", "Cotiza")">Cotizaciones</a></li>
                                    <li><a href="@Url.Action("Index", "News")">Noticias</a></li>
                                    <li><a href="@Url.Action("Index", "Sponsor")">Patrocinadores</a></li>
                                }
                            </ul>

                            <a data-toggle="collapse" class="nav-header" href="#accounts-menu"><i class="icon-briefcase"></i>Cuentas<span class="label label-info"></span></a>
                            <ul class="nav nav-list collapse" id="accounts-menu">
                                <li>
                                    @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", @class = "formlogin" }))
                                    {
                                        @Html.AntiForgeryToken()
                                        <a class="brand" href="javascript:document.getElementById('logoutForm').submit()">Salir</a>
                                    }

                                </li>
                                <li>@Html.ActionLink(User.Identity.Name, "Manage", "Account")</li>
                            </ul>
                            @if (!Request.IsAuthenticated)
                            {
                                <a data-toggle="collapse" class="nav-header" href="#carga-menu"><i class="icon-legal"></i>Carga Archivos</a>
                                <ul class="nav nav-list collapse" id="carga-menu">
                                    <li><a href="@Url.Action("ViewUploader", "Home")">Carga</a></li>

                                </ul>}

                            <a class="nav-header" href="#"><i class="icon-question-sign"></i>Ayuda</a>
                            <a class="nav-header" href="#"><i class="icon-comment"></i>Preguntas Freq.</a>
                        </div>

                    </div>
                    @if (Request.IsAuthenticated && Roles.IsUserInRole("Admin"))
                    {

                        <div class="span8">

                            <div class="row-fluid">
                                <div class="block">
                                    <a data-toggle="collapse" class="block-heading" href="#page-stats">Estadisticas de Páginas</a>
                                    <div class="block-body in collapse in" id="page-stats" style="height: auto;">

                                        <div class="stat-widget-container">
                                            <div class="stat-widget">
                                                <div class="stat-button">
                                                    <p class="title cotcounter"></p>
                                                    <p class="detail">Cotizaciones</p>
                                                </div>
                                            </div>

                                            <div class="stat-widget">
                                                <div class="stat-button">
                                                    <p class="title contcounter"></p>
                                                    <p class="detail">Contactos</p>
                                                </div>
                                            </div>

                                            <div class="stat-widget">
                                                <div class="stat-button">
                                                    <p class="title prodcounter"></p>
                                                    <p class="detail">Productos Activos</p>
                                                </div>
                                            </div>

                                            <div class="stat-widget">
                                                <div class="stat-button">
                                                    <p class="title newscounter"></p>
                                                    <p class="detail">Noticias Activas</p>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row-fluid">
                                <div class="block span12">
                                    <a data-toggle="collapse" class="block-heading" href="#tablewidget">Productos Activos<span class="label label-warning" id="spanProductos">0</span></a>
                                    <div class="block-body collapse" id="tablewidget">

                                        <p><a href="#">More...</a></p>
                                    </div>
                                </div>

                            </div>

                            <div class="row-fluid">
                                <div class="block span12">
                                    <a data-toggle="collapse" class="block-heading" href="#tablecotiza">Cotizaciones Activas<span class="label label-warning" id="spanCotiza">0</span></a>
                                    <div class="block-body collapse" id="tablecotiza">
                                        <p><a href="#">More...</a></p>
                                    </div>
                                </div>

                            </div>

                            <div class="row-fluid">
                                <div class="block span12">
                                    <a data-toggle="collapse" class="block-heading" href="#tablecontacts">Últimos Contactos<span class="label label-warning" id="spanContactos">0</span></a>
                                    <div class="block-body collapse" id="tablecontacts">
                                        <p><a href="#">More...</a></p>
                                    </div>
                                </div>

                            </div>

                        </div>
                    }
                    else if (Request.IsAuthenticated && Roles.IsUserInRole("Users"))
                    {
                        <div class="span8">
                            <div class="row-fluid">
                                <div class="headline">
                                    <h3>Operaciones</h3>
                                </div>
                                <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem donec id elit non mi porta gravida at eget metus.</p>
                                <br />
                                <div class="row-fluid servive-block servive-block-in">
                                    <div class="span4">
                                        <h4><a href="#">Ordenes de Compra</a></h4>
                                        <p><i class="icon-bell"></i></p>
                                        <p>Donec id elit non mi porta gravida at eget metus id elit mi egetine.</p>
                                    </div>
                                    <div class="span4">
                                        <h4><a href="#">Cotizaciones</a></h4>
                                        <p><i class="icon-bullhorn"></i></p>
                                        <p>Donec id elit non mi porta gravida at eget metus id elit mi egetine.</p>
                                    </div>
                                    <div class="span4">
                                        <h4><a href="#">Estados de Cuenta</a></h4>
                                        <p><i class=" icon-lightbulb"></i></p>
                                        <p>Donec id elit non mi porta gravida at eget metus id elit mi egetine.</p>
                                    </div>
                                    <div class="span4">
                                        <h4><a href="#">Balances de Cuenta</a></h4>
                                        <p><i class=" icon-lightbulb"></i></p>
                                        <p>Donec id elit non mi porta gravida at eget metus id elit mi egetine.</p>
                                    </div>
                                </div>
                                <!--/welcome-block-->
                            </div>
                            <!--/row-fluid-->
                        </div>
                    }

                </div>

            </div>
                

        }


    </section>

</div>

<script>

    //App.initBxSlider1();
    var jsonresult;
    var $j = jQuery.noConflict();

    function AddPager(div) {
        $j("div.holder").jPages({
            containerID: div,
            //              previous: "←",
            //              next: "→",
            first: "first",
            previous: "previous",
            next: "next",
            last: "last",
            perPage: 5,
            delay: 20
        });
    }

    $j(function () {

        jQuery.ajax(
          {
              type: 'post',
              url: '@Url.Content("~/ProductView/GetInfoPage/")',
              success: function (data) {

                  var result = JSON.parse(data);
                  jsonresult = result;
                  //container
                  var htmlresult = '';
                  htmlresult += '<ol class="carousel-indicators">';
                  $j.each(result.$values, function (val, product) {
                      if (val == 0) {
                          htmlresult += '<li data-target="#myCarousel" data-slide-to="' + val + '" class="active"></li>';
                      }
                      else {
                          htmlresult += '<li data-target="#myCarousel" data-slide-to="' + val + '" class=""></li>';
                      }
                  });
                  htmlresult += '</ol><div class="carousel-inner">'
                  $j.each(result.$values, function (val, product) {
                      if (val == 0) {
                          htmlresult += '<div class="item active">';
                      }
                      else {
                          htmlresult += '<div class="item">';
                      }
                      var urlHelper = new UrlHelper();
                      var url = urlHelper.urlImage(product.PRC_Imagen);

                      htmlresult += '<img src="' + url + '" alt="" onclick="displayHtml(' + product.PRC_Id + ')">';
                      htmlresult += '<div class="carousel-caption">';
                      htmlresult += '<h4>' + product.PRC_Text + '</h4>';
                      htmlresult += ' <p>' + product.PRC_Descripcion + '</p>';
                      htmlresult += '</div>';
                      htmlresult += '</div>';
                  });

                  htmlresult += '</div><a class="left carousel-control" href="#myCarousel" data-slide="prev">‹</a>';
                  htmlresult += '<a class="right carousel-control" href="#myCarousel" data-slide="next">›</a>';
                  $j('#myCarousel').html(htmlresult);

              },
              error: function (a, b, c) {

              }
          });
    });


      function displayHtml(id) {
          $j.each(jsonresult.$values, function (val, product) {
              if (product.PRC_Id == id) {
                  $j('#ContentDiv').html(product.PRC_Html);
                  return false;
              }
          });
      }

      $k = jQuery.noConflict();
      $k(function () {
          jQuery.ajax(
            {
                type: 'post',
                url: '@Url.Content("~/News/GetNewToDisplay/")',
                success: function (data) {
                    var result = JSON.parse(data);
                    var htmlresult = '';
                    htmlresult += '<ul id="list" class="bxslider recent-work">';
                    $k.each(result.$values, function (val, noti) {
                        var urlHelper = new UrlHelper();
                        var url = urlHelper.urlImage(noti.NEW_Imagen);
                        htmlresult += '<li><a href="#" onclick="VerNewId(' + noti.NEW_Id + ')"><em class="overflow-hidden">';
                        htmlresult += '<img  src="' + url + '" alt="" /></em>';
                        htmlresult += ' <span><strong>' + noti.NEW_Titulo + '</strong>'
                        htmlresult += '<i>' + noti.NEW_Descripcion + '</i></span></a></li>'
                    });
                    htmlresult += '</ul>';
                    $k('.boletinagro').html(htmlresult);
                    $k('.bxslider').bxSlider({
                        minSlides: 3,
                        maxSlides: 3,
                        slideWidth: 360,
                        slideMargin: 10
                    });
                },
                error: function (a, b, c) {

                }
            });

      });

        $j(function () {
            jQuery.ajax(
            {
                type: 'post',
                url: '@Url.Content("~/ProductView/GetProductsTop/5")',
                data:
                {
                    counter: 15
                },
                success: function (data) {
                    var result = JSON.parse(data);
                    var htmlresult = '';
                    $j.each(result.$values, function (val, product) {
                        var urlHelper = new UrlHelper();
                        var url = urlHelper.urlImage(product.PRO_Image);
                        htmlresult += '<li><a href="#"><img class="hover-effect" alt=' + product.PRO_Nombre + ' src="' + url + '"></a></li>';
                    });
                    $j('.last-product').html(htmlresult);
                },
                error: function (a, b, c) {

                }
            });

        });

        function VerNewId(id) {
            var url = '@Url.Action("GetNewsId", "News")' + '/' + id;
            window.location = url;
        }


        var isAuth = '@Request.IsAuthenticated'

    $j(function () {
        if (isAuth == 'True') {
            jQuery.ajax(
                  {
                      type: 'post',
                      url: '@Url.Action("GetCurrentContacts", "Contact")',
                      success: function (data) {
                          var result = JSON.parse(data);
                          var htmlresult = '';
                          var counter = 0;
                          htmlresult += '<table class="table"> <thead> <tr>';
                          htmlresult += '<th>Nombre</th>';
                          htmlresult += '<th>Correo</th>';
                          htmlresult += '<th>Fecha de Contacto</th>';
                          htmlresult += '</tr></thead><tbody id="contactdiv">';
                          $j('#spanContactos').html(result.$values.length);
                          $j.each(result.$values, function (val, cont) {
                              htmlresult += '<tr>';
                              htmlresult += '<td>' + cont.CON_Nombre + '</td>';
                              htmlresult += '<td>' + cont.CON_Email + '</td>';
                              htmlresult += '<td>' + cont.CON_Fecha + '</td>';
                              htmlresult += '</tr>';
                          });
                          htmlresult += '</tbody><tfoot> <tr><td colspan="3"><div class="holder" style="float:left"></div></td></tr></tfoot></table>';
                          $j('#tablecontacts').html(htmlresult);
                          AddPager('contactdiv');
                      },
                      error: function (a, b, c) {

                      }
                  });
              }
    });

          $j(function () {
              if (isAuth == 'True') {
                  jQuery.ajax(
                        {
                            type: 'post',
                            url: '@Url.Action("GetCurrentProducts", "Product")',
                            success: function (data) {
                                var result = JSON.parse(data);
                                var htmlresult = '';
                                var counter = 0;
                                htmlresult += '<table class="table"> <thead> <tr>';
                                htmlresult += '<th>Producto</th>';
                                htmlresult += '<th>Descripción</th>';
                                htmlresult += '<th>Fecha de Actualización</th>';
                                htmlresult += '</tr></thead><tbody id="proddiv">';
                                $j('#spanProductos').html(result.$values.length);
                                $j.each(result.$values, function (val, pro) {
                                    htmlresult += '<tr>';
                                    htmlresult += '<td>' + pro.PRO_Nombre + '</td>';
                                    htmlresult += '<td>' + pro.PRO_Descripcion + '</td>';
                                    htmlresult += '<td>' + pro.PRO_Date + '</td>';
                                    htmlresult += '</tr>';
                                });
                                htmlresult += '</tbody><tfoot> <tr><td colspan="3"><div class="holder" style="float:left"></div></td></tr></tfoot></table>';
                                $j('#tablewidget').html(htmlresult);
                                AddPager('proddiv');
                            },
                            error: function (a, b, c) {

                            }
                        });
                    }
          });

                $j(function () {
                    if (isAuth == 'True') {
                        jQuery.ajax(
                         {
                             type: 'post',
                             url: '@Url.Action("GetCurrentCotizaciones", "Cotiza")',
                             success: function (data) {
                                 var result = JSON.parse(data);
                                 var htmlresult = '';
                                 var counter = 0;
                                 htmlresult += '<table class="table"> <thead> <tr>';
                                 htmlresult += '<th>Contacto</th>';
                                 htmlresult += '<th>Correo</th>';
                                 htmlresult += '<th>Fecha de Cotización</th>';
                                 htmlresult += '</tr></thead><tbody id="cotizadiv">';
                                 $j('#spanCotiza').html(result.$values.length);
                                 $j.each(result.$values, function (val, cot) {
                                     htmlresult += '<tr>';
                                     htmlresult += '<td>' + cot.COT_Nombre + '</td>';
                                     htmlresult += '<td>' + cot.COT_Email + '</td>';
                                     htmlresult += '<td>' + cot.COT_Fecha + '</td>';
                                     htmlresult += '</tr>';
                                 });
                                 htmlresult += '</tbody><tfoot> <tr><td colspan="3"><div class="holder" style="float:left"></div></td></tr></tfoot></table>';
                                 $j('#tablecotiza').html(htmlresult);
                                 AddPager('cotizadiv');
                             },
                             error: function (a, b, c) {

                             }
                         });
                     }
                });

                 $j(function () {
                     if (isAuth == 'True') {
                         jQuery.ajax(
                          {
                              type: 'post',
                              url: '@Url.Action("GetAllStats", "Home")',
                              success: function (data) {
                                  var result = JSON.parse(data);
                                  var counter = 0;
                                  $j('.cotcounter').html(result.Cotizaciones);
                                  $j('.contcounter').html(result.Contactos);
                                  $j('.prodcounter').html(result.Productos);
                                  $j('.newscounter').html(result.Noticias);
                              },
                              error: function (a, b, c) {

                              }
                          });
                      }
                 });
</script>
